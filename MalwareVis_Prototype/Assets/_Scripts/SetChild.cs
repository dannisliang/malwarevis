using UnityEngine;
using System.Collections;

public class SetChild : MonoBehaviour {

    /*------------------------------------
    Toggles Hud GameObject between Origin and Camera
     -------------------------------------*/

    public GameObject HUD;
    public Transform Camera;
    public Transform Origin;
    public float transitionSpeed = .1f;
    public KeyCode Enable = KeyCode.T;
    public GameObject[] Panels;

    bool attached;
    bool transition; 

    void Start()
    {
        HUD.transform.SetParent(Origin);
        attached = false;
        transition = false;
    }

	void Update () {
        foreach (GameObject panel in Panels)
        {
            if (panel.transform.rotation.x > 0 && panel.transform.rotation.x < 1) 
                panel.transform.Rotate(Vector3.left, 30 * Time.deltaTime);
        }
        if (Input.GetKeyDown(Enable))
        {
            //if attached to Parent 2 attach to Parent 1
            if(!attached)
            {
                HUD.transform.SetParent(Camera);
                HUD.transform.position = new Vector3(Camera.position.x, Camera.position.y + .5f, Camera.position.z);
                transition = true;
                attached = true;
            }
            //if attached to Parent 1 attach to Parent 2
            else
            {
                HUD.transform.SetParent(Origin);
                HUD.transform.position = Origin.position;
                HUD.transform.LookAt(Vector3.zero);
                attached = false;
            }
        }
        if (transition){
            CoolStuff();
        }

	}

    //brings the hud from above the camera to the camera at "transitionspeed
    void CoolStuff()
    {
        HUD.transform.Translate(Vector3.down * Time.deltaTime * transitionSpeed);
        if (Camera.position.y >= HUD.transform.position.y)
        {
            transition = false;
        }
        
    }
}
