using UnityEngine;
using System.Collections;

public class SetChild : MonoBehaviour {

    /*------------------------------------
    Toggles child GameObject between two parents
     -------------------------------------*/

    public GameObject Child;
    public Transform Parent1;
    public Transform Parent2;
    public float transitionSpeed = .1f;
    public KeyCode Enable = KeyCode.T;

    bool attached;
    bool transition; 

    void Start()
    {
        Child.transform.SetParent(Parent2);
        attached = false;
        transition = false;
    }

	void Update () {
        if (Input.GetKeyDown(Enable))
        {
            //if attached to Parent 2 attach to Parent 1
            if(!attached)
            {
                Child.transform.SetParent(Parent1);
                Child.transform.position = new Vector3(Parent1.position.x, Parent1.position.y + .5f, Parent1.position.z);
                transition = true;
                attached = true;
            }
            //if attached to Parent 1 attach to Parent 2
            else
            {
                Child.transform.SetParent(Parent2);
                Child.transform.position = Parent2.position;
                attached = false;
            }
        }
        if (transition){
            CoolStuff();
        }

	}

    //brings the hud from above the camera to the camera at "transitionspeed
    void CoolStuff()
    {
        Child.transform.Translate(Vector3.down * Time.deltaTime * transitionSpeed);
        if (Parent1.position.y >= Child.transform.position.y)
        {
            transition = false;
        }
    }
}
